<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DD Date Calendar Test</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }
        .result {
            margin-top: 20px;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>DD Date Calendar Test</h1>
    <p>This test verifies the Flatpickr calendar integration for DD date selection.</p>

    <div class="form-group">
        <label for="testDdDate">DD Date (Calendar Picker)</label>
        <input
            type="text"
            id="testDdDate"
            name="testDdDate"
            placeholder="Click to select a date"
            readonly>
    </div>

    <div class="result">
        <strong>Selected Value:</strong> <span id="selectedValue">None</span>
    </div>

    <div class="result">
        <strong>Formatted Date:</strong> <span id="formattedDate">None</span>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const ddDateInput = document.getElementById('testDdDate');
            const selectedValueSpan = document.getElementById('selectedValue');
            const formattedDateSpan = document.getElementById('formattedDate');

            if (ddDateInput) {
                flatpickr(ddDateInput, {
                    // Allow selection of any date in the current month
                    minDate: new Date(new Date().getFullYear(), new Date().getMonth(), 1), // 1st of current month
                    maxDate: new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0), // Last day of current month

                    // Display settings
                    dateFormat: "j", // Day of month only (1-31)
                    altFormat: "j", // Same format for display
                    altInput: false, // Don't use separate input for formatting

                    // UI settings
                    inline: false, // Show calendar on click, not always visible
                    static: false, // Position relative to input
                    monthSelectorType: "static", // Month dropdown
                    yearSelectorType: "static", // Year dropdown

                    // Accessibility and UX
                    allowInput: false, // Don't allow manual typing - use calendar only
                    clickOpens: true, // Open calendar on input click
                    disableMobile: false, // Enable mobile-optimized version

                    // Event handlers
                    onChange: function(selectedDates, dateStr, instance) {
                        // Update display values
                        if (selectedDates.length > 0) {
                            const day = selectedDates[0].getDate();
                            const month = selectedDates[0].getMonth() + 1;
                            const year = selectedDates[0].getFullYear();

                            selectedValueSpan.textContent = day.toString();
                            formattedDateSpan.textContent = `${day}/${month}/${year}`;
                        } else {
                            selectedValueSpan.textContent = 'None';
                            formattedDateSpan.textContent = 'None';
                        }
                    },

                    // Localization
                    locale: {
                        firstDayOfWeek: 1, // Start week on Monday
                    }
                });

                // Initial display update
                selectedValueSpan.textContent = ddDateInput.value || 'None';
                formattedDateSpan.textContent = 'None';
            }
        });
    </script>
</body>
</html>